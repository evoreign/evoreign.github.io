<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADVL Official Shop - Beliin.id</title>
    
    <link rel="stylesheet" href="./component/css/main.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="icon" href="./assets/logo.PNG" type="image/png">

    <style>
        /* -------------------------------------------------------------------------- */
        /* Base Styles & Utilities                            */
        /* -------------------------------------------------------------------------- */
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            vertical-align: -0.125em;
        }
        
        /* -------------------------------------------------------------------------- */
        /* Layout & Header Styles                             */
        /* -------------------------------------------------------------------------- */
        .logo-image {
            width: 15%;
            height: 15%;
            object-fit: cover;
            border-radius: var(--radius);
        }

        /* -------------------------------------------------------------------------- */
        /* Store Header Section                               */
        /* -------------------------------------------------------------------------- */
        .store-avatar-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: var(--radius-md);
        }
        .stat-item .icon {
            width: 1.25em;
            height: 1.25em;
            margin-right: var(--spacing-2);
        }

        /* -------------------------------------------------------------------------- */
        /* Store Banner Carousel                              */
        /* -------------------------------------------------------------------------- */
        .banner-carousel-wrapper .banner-slide {
            display: none;
        }
        .banner-carousel-wrapper .banner-slide.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .banner-carousel-wrapper .banner-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: var(--radius-lg);
        }

        /* -------------------------------------------------------------------------- */
        /* Product Grid Styles                                */
        /* -------------------------------------------------------------------------- */
        .product-image-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
    </style>
</head>
<body class="page-body">

    <header class="site-header">
        <div class="header-container">
            <div class="logo-container">
                <a href="index.html" class="logo-link">
                    <img src="./assets/logo.jpeg" alt="Logo Beliin.id" class="logo-image">
                </a>
            </div>
            <div class="search-bar-container new-search-bar desktop-search">
                <form action="#" class="search-form">
                    <i data-lucide="search" class="icon search-icon-inside"></i>
                    <input type="search" class="form-input search-input" placeholder="Cari produk, kategori, atau toko...">
                </form>
            </div>
            <nav class="header-actions">
                <button type="button" class="btn btn-ghost btn-icon mobile-search-trigger" aria-label="Buka Pencarian"><i data-lucide="search" class="icon"></i></button>
                <a href="keranjang.html" class="btn btn-ghost btn-icon" aria-label="Keranjang Belanja"><i data-lucide="shopping-cart" class="icon"></i></a>
                <a href="wishlist.html" class="btn btn-ghost btn-icon" aria-label="Wishlist"><i data-lucide="heart" class="icon"></i></a>
                <a href="chat.html" class="btn btn-ghost btn-icon" aria-label="Chat"><i data-lucide="message-circle" class="icon"></i></a>
                <a href="profile.html" class="btn btn-ghost btn-icon" aria-label="Profil Pengguna"><i data-lucide="user" class="icon"></i></a>
            </nav>
        </div>
    </header>

    <div class="search-overlay" id="searchOverlay">
        <div class="search-overlay-header">
            <div class="search-bar-container new-search-bar">
                <form action="#" class="search-form">
                    <i data-lucide="search" class="icon search-icon-inside"></i>
                    <input type="search" class="form-input search-input" placeholder="Cari di Beliin.id..." id="mobileSearchInput">
                </form>
            </div>
            <button type="button" class="btn btn-link search-overlay-close" id="searchOverlayClose">Batal</button>
        </div>
        <div class="search-overlay-content"></div>
    </div>

    <main class="store-profile-page-content container">

        <section class="store-header-section card">
            <div class="store-header-main-info">
                <div class="store-avatar-placeholder placeholder-bg">
                    <img src="./assets/store/logo.image" alt="ADVL Official Shop">
                </div>
                <div class="store-details-actions">
                    <div class="store-name-status">
                        <h1 class="store-name">ADVL Official Shop</h1>
                        <p class="store-activity-status">Aktif 1 menit yang lalu</p>
                    </div>
                    <div class="store-action-buttons">
                        <button class="btn btn-outline btn-sm follow-button" id="followStoreButton" data-following="false">
                            <i data-lucide="plus" class="icon"></i> <span class="follow-text">Ikuti</span>
                        </button>
                        <a href="chat.html?store_id=ADVLShop" class="btn btn-primary btn-sm chat-button">
                            <i data-lucide="message-circle" class="icon"></i> Chat
                        </a>
                    </div>
                </div>
            </div>
            <div class="store-stats-grid">
                <div class="stat-item"><i data-lucide="package" class="icon"></i><span>Produk: <strong>15,4RB</strong></span></div>
                <div class="stat-item"><i data-lucide="users" class="icon"></i><span>Pengikut: <strong>898,1 RB</strong></span></div>
                <div class="stat-item"><i data-lucide="star" class="icon"></i><span>Rating: <strong>4,9</strong> (dari 10k+ ulasan)</span></div>
                <div class="stat-item"><i data-lucide="user-plus" class="icon"></i><span>Mengikuti Toko: <strong id="followingCountDisplay">0</strong></span></div>
                <div class="stat-item"><i data-lucide="message-square-share" class="icon"></i><span>Performa Chat: <strong>50%</strong></span></div>
                <div class="stat-item"><i data-lucide="calendar-days" class="icon"></i><span>Bergabung: <strong>6 Tahun Lalu</strong></span></div>
            </div>
        </section>

        <nav class="store-category-tabs content-section tab-navigation" id="storeCategoryTabs">
            <button type="button" class="tab-button active" aria-selected="true" data-category="Baju">Baju</button>
            <button type="button" class="tab-button" aria-selected="false" data-category="Celana">Celana</button>
            <button type="button" class="tab-button" aria-selected="false" data-category="Jaket">Jaket</button>
            <button type="button" class="tab-button" aria-selected="false" data-category="Topi">Topi</button>
            <button type="button" class="tab-button" aria-selected="false" data-category="Knit Collections">Knit Collections</button>
            <button type="button" class="tab-button" aria-selected="false" data-category="Lainnya">Lainnya...</button>
        </nav>

        <section class="store-banner-carousel content-section">
            <div class="banner-carousel-wrapper" id="storeBannerCarousel">
                <div class="banner-slide active"><img src="./assets/banner/banner4.png" alt="Store Promotion 1"></div>
                <div class="banner-slide"><img src="./assets/banner/banner3.jpg" alt="Store Promotion 2"></div>
                <div class="banner-slide"><img src="./assets/banner/banner2.jpg" alt="Store Promotion 3"></div>
            </div>
            <div class="carousel-pagination" id="storeBannerPagination"></div>
        </section>

        <section class="store-products-section content-section">
            <h2 class="section-title" id="storeProductsTitle">Produk Toko - Baju</h2>
            <div class="product-sort-bar">
                <label for="sort-products" class="sort-label">Urutkan:</label>
                <select id="sort-products" class="form-select sort-select">
                    <option value="newest" selected>Produk Terbaru</option>
                    <option value="price-low-high">Harga Terendah</option>
                    <option value="price-high-low">Harga Tertinggi</option>
                    <option value="best-selling">Terlaris</option>
                </select>
                <button type="button" class="btn btn-ghost btn-icon view-toggle-button" id="toggleViewButton" aria-label="Ubah tampilan"><i data-lucide="layout-grid" class="icon"></i></button>
            </div>
            <div class="product-grid store-product-grid" id="storeProductGrid"></div>
        </section>

        <nav class="product-pagination pagination-container" aria-label="Navigasi produk toko" id="storeProductPagination"></nav>
    </main>

<script>
document.addEventListener('DOMContentLoaded', function () {

    /**
     * ------------------------------------------------------------------------
     * Global Initializations
     * ------------------------------------------------------------------------
     */
    lucide.createIcons();
    initializeSearchOverlay();
    initializeStoreProfilePage();

    /**
     * ------------------------------------------------------------------------
     * Mobile Search Overlay Functionality
     * ------------------------------------------------------------------------
     */
    function initializeSearchOverlay() {
        const searchOverlay = document.getElementById('searchOverlay');
        const searchTrigger = document.querySelector('.mobile-search-trigger');
        const searchClose = document.getElementById('searchOverlayClose');
        const mobileSearchInput = document.getElementById('mobileSearchInput');

        if (!searchOverlay || !searchTrigger || !searchClose) return;

        searchTrigger.addEventListener('click', () => {
            searchOverlay.classList.add('is-active');
            if (mobileSearchInput) mobileSearchInput.focus();
        });

        searchClose.addEventListener('click', () => {
            searchOverlay.classList.remove('is-active');
        });
    }

    /**
     * ------------------------------------------------------------------------
     * Store Profile Page Main Initializer
     * ------------------------------------------------------------------------
     */
    function initializeStoreProfilePage() {
        // Mock data for all store products, categorized
        const storeProductsData = {
            "Baju": [{ id: "sb1", name: "ADLV Basic Short Sleeve T-Shirt", price: 180000, image: "./assets/store/shirt/1.jpeg" }, { id: "sb2", name: "ADLV Ink Stamp Logo T-Shirt", price: 90000, image: "./assets/store/shirt/2.jpg" }, { id: "sb3", name: "ADLV Basic Logo Longsleeve", price: 120000, image: "./assets/store/shirt/3.jpeg" }, { id: "sb4", name: "ADLV Baby Face Scream Boy T-Shirt", price: 160000, image: "./assets/store/shirt/4.jpeg" }],
            "Celana": [{ id: "sc1", name: "ADLV Creature Metal Logo Pants", price: 220000, image: "./assets/store/celana/1.jpeg" }, { id: "sc2", name: "ADLV Pocket Denim Pants Blue", price: 350000, image: "./assets/store/celana/2.jpeg" }],
            "Jaket": [{ id: "sj1", name: "ADLV Lettering Rabbit Hoodie", price: 280000, image: "./assets/store/jaket/1.jpeg" }],
            "Topi": [{ id: "st1", name: "ADLV Basic Ball Cap Black", price: 75000, image: "./assets/store/hats/1.jpeg" }],
            "Knit Collections": [{ id: "sk1", name: "ADLV Symbol V Neck Knit", price: 190000, image: "./assets/store/knit/1.jpeg" }],
            "Lainnya": [{ id: "sl1", name: "ADLV Symbol Two Way Gym Sack", price: 50000, image: "./assets/store/other/1.jpeg" }]
        };

        // Central state for the products section
        const pageState = {
            productsPerPage: 8,
            currentPage: 1,
            currentCategory: 'Baju',
            currentSort: 'newest'
        };

        // Setup all interactive components
        setupFollowButton();
        setupStoreBannerCarousel();
        setupStoreCategoryTabs(pageState, storeProductsData);
        setupProductInteractions(pageState, storeProductsData);

        // Initial render of products
        renderProducts(pageState, storeProductsData);
    }

    /**
     * ------------------------------------------------------------------------
     * Follow Button Logic
     * ------------------------------------------------------------------------
     */
    function setupFollowButton() {
        const followButton = document.getElementById('followStoreButton');
        if (!followButton) return;
        
        const followText = followButton.querySelector('.follow-text');
        const followIcon = followButton.querySelector('.icon');

        followButton.addEventListener('click', function() {
            const isFollowing = this.dataset.following === 'true';
            this.dataset.following = !isFollowing;

            followText.textContent = isFollowing ? 'Ikuti' : 'Mengikuti';
            this.classList.toggle('btn-outline', isFollowing);
            this.classList.toggle('btn-primary', !isFollowing);
            followIcon.setAttribute('data-lucide', isFollowing ? 'plus' : 'check');

            lucide.createIcons({ nodes: [followIcon] });
            alert(isFollowing ? 'Anda berhenti mengikuti toko ini.' : 'Anda sekarang mengikuti toko ini!');
        });
    }

    /**
     * ------------------------------------------------------------------------
     * Store Banner Carousel Logic
     * ------------------------------------------------------------------------
     */
    function setupStoreBannerCarousel() {
        const carousel = document.getElementById('storeBannerCarousel');
        const paginationContainer = document.getElementById('storeBannerPagination');
        if (!carousel || !paginationContainer) return;

        const slides = carousel.querySelectorAll('.banner-slide');
        if (slides.length <= 1) return;

        let currentIndex = 0;
        let autoplayInterval;

        // Create pagination dots
        slides.forEach((_, index) => {
            const dot = document.createElement('button');
            dot.classList.add('dot');
            dot.setAttribute('aria-label', `Go to slide ${index + 1}`);
            dot.addEventListener('click', () => showSlide(index, true));
            paginationContainer.appendChild(dot);
        });

        const dots = paginationContainer.querySelectorAll('.dot');

        const showSlide = (index, resetAutoplay = false) => {
            currentIndex = index;
            slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
            dots.forEach((dot, i) => dot.classList.toggle('active', i === index));
            if (resetAutoplay) {
                clearInterval(autoplayInterval);
                startAutoplay();
            }
        };

        const startAutoplay = () => {
            autoplayInterval = setInterval(() => {
                const nextIndex = (currentIndex + 1) % slides.length;
                showSlide(nextIndex);
            }, 4000);
        };

        carousel.addEventListener('mouseenter', () => clearInterval(autoplayInterval));
        carousel.addEventListener('mouseleave', startAutoplay);
        
        showSlide(0);
        startAutoplay();
    }

    /**
     * ------------------------------------------------------------------------
     * Store Category Tabs Logic
     * ------------------------------------------------------------------------
     */
    function setupStoreCategoryTabs(state, data) {
        const categoryTabs = document.querySelectorAll('#storeCategoryTabs .tab-button');
        const productsTitle = document.getElementById('storeProductsTitle');
        
        categoryTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                categoryTabs.forEach(t => { t.classList.remove('active'); t.setAttribute('aria-selected', 'false'); });
                this.classList.add('active');
                this.setAttribute('aria-selected', 'true');
                
                state.currentCategory = this.dataset.category;
                state.currentPage = 1; // Reset to first page on category change
                if (productsTitle) productsTitle.textContent = `Produk Toko - ${state.currentCategory}`;
                
                renderProducts(state, data);
            });
        });
    }

    /**
     * ------------------------------------------------------------------------
     * Product Sorting and View Toggle Logic
     * ------------------------------------------------------------------------
     */
    function setupProductInteractions(state, data) {
        const sortSelect = document.getElementById('sort-products');
        const toggleViewButton = document.getElementById('toggleViewButton');

        if (sortSelect) {
            sortSelect.addEventListener('change', function() {
                state.currentSort = this.value;
                state.currentPage = 1; // Reset to first page on sort change
                renderProducts(state, data);
            });
        }
        if (toggleViewButton) {
            toggleViewButton.addEventListener('click', () => alert('Fungsi ubah tampilan belum diimplementasikan.'));
        }
    }

    /**
     * ------------------------------------------------------------------------
     * Core Product Rendering Function
     * ------------------------------------------------------------------------
     */
    function renderProducts(state, data) {
        const productGrid = document.getElementById('storeProductGrid');
        if (!productGrid) return;
        
        let productsToDisplay = [...(data[state.currentCategory] || [])];

        // --- Sorting Logic ---
        switch (state.currentSort) {
            case 'price-low-high':
                productsToDisplay.sort((a, b) => a.price - b.price);
                break;
            case 'price-high-low':
                productsToDisplay.sort((a, b) => b.price - a.price);
                break;
            // 'newest' and 'best-selling' are default or require more data
        }

        // --- Pagination Logic ---
        const start = (state.currentPage - 1) * state.productsPerPage;
        const end = start + state.productsPerPage;
        const paginatedProducts = productsToDisplay.slice(start, end);

        if (paginatedProducts.length === 0) {
            productGrid.innerHTML = `<p class="empty-state-text">Tidak ada produk untuk kategori ini.</p>`;
        } else {
            productGrid.innerHTML = paginatedProducts.map(createProductCardHTML).join('');
        }
        
        renderPagination(productsToDisplay.length, state, data);
    }
    
    /**
     * ------------------------------------------------------------------------
     * Pagination Rendering Function
     * ------------------------------------------------------------------------
     */
    function renderPagination(totalProducts, state, data) {
        const paginationContainer = document.getElementById('storeProductPagination');
        if (!paginationContainer) return;

        paginationContainer.innerHTML = '';
        const totalPages = Math.ceil(totalProducts / state.productsPerPage);
        if (totalPages <= 1) return;

        const createPageLink = (pageNumber, content, isEnabled, isArrow = false) => {
            const li = document.createElement('li');
            li.className = `page-item ${!isEnabled ? 'disabled' : ''} ${pageNumber === state.currentPage ? 'active' : ''}`;
            const a = document.createElement('a');
            a.className = `page-link ${isArrow ? 'page-link-arrow' : ''}`;
            a.href = '#';
            a.innerHTML = content;
            if (isEnabled) {
                a.addEventListener('click', (e) => {
                    e.preventDefault();
                    state.currentPage = pageNumber;
                    renderProducts(state, data);
                });
            }
            li.appendChild(a);
            return li;
        };
        
        const ul = document.createElement('ul');
        ul.className = 'pagination';

        // Previous button
        ul.appendChild(createPageLink(state.currentPage - 1, '<i data-lucide="chevron-left" class="icon"></i>', state.currentPage > 1, true));
        
        // Page numbers
        for (let i = 1; i <= totalPages; i++) {
            ul.appendChild(createPageLink(i, i, true));
        }
        
        // Next button
        ul.appendChild(createPageLink(state.currentPage + 1, '<i data-lucide="chevron-right" class="icon"></i>', state.currentPage < totalPages, true));

        paginationContainer.appendChild(ul);
        lucide.createIcons({ context: paginationContainer });
    }

    /**
     * ------------------------------------------------------------------------
     * Reusable Product Card HTML Generator
     * ------------------------------------------------------------------------
     */
    function createProductCardHTML(product) {
        const formattedPrice = new Intl.NumberFormat('id-ID').format(product.price);
        return `
            <div class="product-card card card-interactive">
                <a href="detailProduct.html?id=${product.id}" class="product-link-wrapper">
                    <div class="product-image-placeholder placeholder-bg"><img src="${product.image}" alt="${product.name}"></div>
                    <div class="product-card-content">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">Rp ${formattedPrice}</p>
                    </div>
                </a>
            </div>`;
    }
});
</script>
</body>
</html>