<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promo Menarik - Beliin.id</title>
    
    <link rel="stylesheet" href="./component/css/main.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="icon" href="./assets/logo.PNG" type="image/png">

    <style>
        /* -------------------------------------------------------------------------- */
        /* Base Styles                                */
        /* -------------------------------------------------------------------------- */
        .icon {
            display: inline-block;
            width: 1em;
            height: 1em;
            vertical-align: -0.125em;
        }

        /* -------------------------------------------------------------------------- */
        /* Layout & Component Styles                      */
        /* -------------------------------------------------------------------------- */
        .logo-image {
            width: 15%;
            height: 15%;
            object-fit: cover;
            border-radius: var(--radius);
        }
        
        /* Ensures product images fill their container without distortion */
        .product-image-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* Styles for the main promo banner image */
        .banner-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: var(--radius-lg);
        }
    </style>
</head>
<body class="page-body">

    <header class="site-header">
        <div class="header-container">
            <div class="logo-container">
                <a href="index.html" class="logo-link">
                    <img src="./assets/logo.jpeg" alt="Logo Beliin.id" class="logo-image">
                </a>
            </div>

            <div class="search-bar-container new-search-bar desktop-search">
                <form action="#" class="search-form">
                    <i data-lucide="search" class="icon search-icon-inside"></i>
                    <input type="search" class="form-input search-input" placeholder="Cari produk, kategori, atau toko...">
                </form>
            </div>

            <nav class="header-actions">
                <button type="button" class="btn btn-ghost btn-icon mobile-search-trigger" aria-label="Buka Pencarian">
                    <i data-lucide="search" class="icon"></i>
                </button>
                <a href="keranjang.html" class="btn btn-ghost btn-icon" aria-label="Keranjang Belanja">
                    <i data-lucide="shopping-cart" class="icon"></i>
                </a>
                <a href="wishlist.html" class="btn btn-ghost btn-icon" aria-label="Wishlist">
                    <i data-lucide="heart" class="icon"></i>
                </a>
                <a href="chat.html" class="btn btn-ghost btn-icon" aria-label="Chat">
                    <i data-lucide="message-circle" class="icon"></i>
                </a>
                <a href="profile.html" class="btn btn-ghost btn-icon" aria-label="Profil Pengguna">
                    <i data-lucide="user" class="icon"></i>
                </a>
            </nav>
        </div>
    </header>

    <div class="search-overlay" id="searchOverlay">
        <div class="search-overlay-header">
            <div class="search-bar-container new-search-bar">
                <form action="#" class="search-form">
                    <i data-lucide="search" class="icon search-icon-inside"></i>
                    <input type="search" class="form-input search-input" placeholder="Cari di Beliin.id..." id="mobileSearchInput">
                </form>
            </div>
            <button type="button" class="btn btn-link search-overlay-close" id="searchOverlayClose">Batal</button>
        </div>
        <div class="search-overlay-content">
            </div>
    </div>

    <main class="promo-page-content container">

        <section class="main-promo-banner content-section">
            <a href="#" class="banner-placeholder placeholder-bg" aria-label="Promo Utama">
                <img src="./assets/banner/banner1.jpg" alt="Banner Promo Utama">
            </a>
        </section>

        <section class="info-bar content-section">
            <a href="promo.html" class="info-item active" data-target="promo">
                <i data-lucide="tag" class="icon info-icon"></i>
                <span>Promo Hari Ini</span>
            </a>
            <a href="coupon.html" class="info-item" data-target="kupon">
                <i data-lucide="ticket" class="icon info-icon"></i>
                <span>Kupon Saya</span>
            </a>
        </section>

        <section class="promo-category-section content-section">
            <div class="section-header">
                <h2 class="section-title">Hot Promo</h2>
                <a href="#" class="see-all-link">Lihat Semua <i data-lucide="chevron-right" class="icon"></i></a>
            </div>
            <div class="product-grid" id="hotPromoProductGrid"></div>
        </section>

        <section class="promo-category-section content-section">
            <div class="section-header">
                <h2 class="section-title">Dapatkan diskonnya!</h2>
                <a href="#" class="see-all-link">Lihat Semua <i data-lucide="chevron-right" class="icon"></i></a>
            </div>
            <div class="product-grid" id="diskonProductGrid"></div>
        </section>

        <section class="promo-category-section tabbed-promo-section content-section">
            <div class="section-header">
                <h2 class="section-title">Cek Promo Lainnya!</h2>
            </div>
            
            <nav class="tab-navigation" id="promoTabNavigation">
                <button type="button" class="tab-button active" aria-selected="true" data-category="Semua Promo">Semua Promo</button>
                <button type="button" class="tab-button" aria-selected="false" data-category="Kecantikan Wajah">Kecantikan Wajah</button>
                <button type="button" class="tab-button" aria-selected="false" data-category="Olahraga & Outdoor">Olahraga & Outdoor</button>
                <button type="button" class="tab-button" aria-selected="false" data-category="Aksesoris Fashion">Aksesoris Fashion</button>
                <button type="button" class="tab-button" aria-selected="false" data-category="Elektronik">Elektronik</button>
            </nav>
            
            <div class="filter-bar">
                <button class="btn btn-outline btn-sm filter-main-button" id="mainFilterButton">
                    <i data-lucide="sliders-horizontal" class="icon"></i> Filter
                </button>
                <button class="btn btn-outline btn-sm tag-button" data-filter="gratis-ongkir">Gratis Ongkir</button>
                <button class="btn btn-outline btn-sm tag-button" data-filter="mall">Mall</button>
                <button class="btn btn-outline btn-sm tag-button" data-filter="flash-sale">Flash Sale</button>
            </div>
            
            <div class="product-grid" id="filteredPromoProductGrid">
                </div>
        </section>

    </main>

<script>
document.addEventListener('DOMContentLoaded', function () {
    
    /**
     * ------------------------------------------------------------------------
     * Global Initializations
     * ------------------------------------------------------------------------
     */
    lucide.createIcons();
    initializeSearchOverlay();
    initializePromoPage();

    /**
     * ------------------------------------------------------------------------
     * Mobile Search Overlay Functionality
     * ------------------------------------------------------------------------
     */
    function initializeSearchOverlay() {
        const searchOverlay = document.getElementById('searchOverlay');
        const searchTrigger = document.querySelector('.mobile-search-trigger');
        const searchClose = document.getElementById('searchOverlayClose');
        const mobileSearchInput = document.getElementById('mobileSearchInput');

        if (!searchOverlay || !searchTrigger || !searchClose) return;

        searchTrigger.addEventListener('click', () => {
            searchOverlay.classList.add('is-active');
            if (mobileSearchInput) mobileSearchInput.focus();
        });

        searchClose.addEventListener('click', () => {
            searchOverlay.classList.remove('is-active');
        });
    }

    /**
     * ------------------------------------------------------------------------
     * Promo Page Main Initializer
     * ------------------------------------------------------------------------
     * Central function to set up all dynamic parts of the promo page.
     */
    function initializePromoPage() {
        // Mock data for products
        const products = {
            hotPromo: [
                { id: "hp1", name: "Sabun Laundry Konsentrat", price: "99.000", image: "./assets/products/hf/1.jpeg" },
                { id: "hp2", name: "Payung Lipat Motif Bebek", price: "75.000", image: "./assets/products/hf/2.jpg" },
                { id: "hp3", name: "Boneka Kucing Ly Hairry Cat", price: "120.000", image: "./assets/products/hf/3.jfif" },
                { id: "hp4", name: "Nike Air Jordan 1 Retro High", price: "50.000", image: "./assets/products/hf/4.jfif" },
                { id: "hp5", name: "Tas Clucth Pria RAPTOR", price: "88.000", image: "./assets/products/hf/5.jfif" },
                { id: "hp6", name: "Sepatu Sandal Prau Hijau", price: "110.000", image: "./assets/products/hf/6.jpg" },
            ],
            diskon: [
                { id: "d1", name: "Hampers Kue Nastar Imlek", price: "199.000", image: "./assets/products/diskon/1.jpg" },
                { id: "d2", name: "Sepatu Running Ortuseight", price: "45.000", image: "./assets/products/diskon/2.jpeg" },
            ],
            filterable: [
                { id: "f1", name: "Vention Kabel HDMI to DVI", price: "130.000", category: "Elektronik", tags: ["gratis-ongkir", "mall"], image: "./assets/products/filter/2.jpg" },
                { id: "f2", name: "Set Perhiasan XUPING", price: "160.000", category: "Kecantikan Wajah", tags: ["mall"], image: "./assets/products/filter/1.jpg" },
                { id: "f3", name: "Sepatu Badminton Victor A830", price: "230.000", category: "Olahraga & Outdoor", tags: ["flash-sale"], image: "./assets/products/filter/3.jfif" }
            ]
        };
        
        // Populate the static product grids on page load
        populateProductGrid('hotPromoProductGrid', products.hotPromo);
        populateProductGrid('diskonProductGrid', products.diskon);
        
        // Setup interactive elements
        setupInfoBar();
        setupPromoTabs(products.filterable);
        setupFilterButtons();

        // Initial population of the filterable grid
        populateProductGrid('filteredPromoProductGrid', products.filterable);
    }
    
    /**
     * ------------------------------------------------------------------------
     * Reusable Product Card Renderer
     * @param {object} product - The product data object.
     * @returns {string} - The HTML string for a product card.
     * ------------------------------------------------------------------------
     */
    function createProductCardHTML(product) {
        return `
            <div class="product-card card card-interactive">
                <a href="detailProduct.html?id=${product.id}" class="product-link-wrapper">
                    <div class="product-image-placeholder placeholder-bg">
                        <img src="${product.image}" alt="${product.name}">
                    </div>
                    <div class="product-card-content">
                        <h3 class="product-name">${product.name}</h3>
                        <p class="product-price">Rp ${product.price}</p>
                    </div>
                </a>
            </div>`;
    }

    /**
     * ------------------------------------------------------------------------
     * Dynamic Grid Population Function
     * @param {string} gridId - The ID of the grid container.
     * @param {Array} products - An array of product objects to display.
     * ------------------------------------------------------------------------
     */
    function populateProductGrid(gridId, products) {
        const gridElement = document.getElementById(gridId);
        if (gridElement) {
            if (products && products.length > 0) {
                 gridElement.innerHTML = products.map(createProductCardHTML).join('');
            } else {
                 gridElement.innerHTML = `<p class="empty-state-text">Tidak ada promo yang ditemukan.</p>`;
            }
        }
    }
    
    /**
     * ------------------------------------------------------------------------
     * Info Bar Interaction Logic
     * ------------------------------------------------------------------------
     */
    function setupInfoBar() {
        const infoItems = document.querySelectorAll('.info-bar .info-item');
        infoItems.forEach(item => {
            item.addEventListener('click', function(e) {
                // This is mainly for visual effect if you're not using it
                // for single-page app style navigation. The link will navigate as normal.
                infoItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });
    }

    /**
     * ------------------------------------------------------------------------
     * Tab Navigation for "Cek Promo Lainnya!" Section
     * @param {Array} allFilterableProducts - The master list of products to filter.
     * ------------------------------------------------------------------------
     */
    function setupPromoTabs(allFilterableProducts) {
        const tabButtons = document.querySelectorAll('#promoTabNavigation .tab-button');
        
        tabButtons.forEach(button => {
            button.addEventListener('click', function() {
                // Update active state for tabs
                tabButtons.forEach(btn => { 
                    btn.classList.remove('active'); 
                    btn.setAttribute('aria-selected', 'false'); 
                });
                this.classList.add('active');
                this.setAttribute('aria-selected', 'true');
                
                // Filter and display products based on the selected category
                const selectedCategory = this.dataset.category;
                const productsToShow = (selectedCategory === "Semua Promo")
                    ? allFilterableProducts
                    : allFilterableProducts.filter(p => p.category === selectedCategory);
                
                populateProductGrid('filteredPromoProductGrid', productsToShow);
            });
        });
    }

    /**
     * ------------------------------------------------------------------------
     * Filter Bar Button Logic (Simulation)
     * ------------------------------------------------------------------------
     */
    function setupFilterButtons() {
        const mainFilterButton = document.getElementById('mainFilterButton');
        if (mainFilterButton) {
            mainFilterButton.addEventListener('click', function() {
                // In a real app, this would open a filter modal or sidebar.
                alert('Tombol "Filter" utama diklik. (Simulasi: Buka modal filter)');
            });
        }
    
        const tagButtons = document.querySelectorAll('.filter-bar .tag-button');
        tagButtons.forEach(button => {
            button.addEventListener('click', function() {
                this.classList.toggle('active'); // Toggle active state for visual feedback
                const filterName = this.textContent;
                const isActive = this.classList.contains('active');
                
                // In a real app, this would trigger a re-filter of the products.
                alert(`Filter tag "${filterName}" sekarang ${isActive ? 'aktif' : 'tidak aktif'}. (Simulasi)`);
            });
        });
    }
});
</script>
</body>
</html>